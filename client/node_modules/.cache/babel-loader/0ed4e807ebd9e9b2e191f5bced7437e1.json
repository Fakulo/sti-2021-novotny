{"ast":null,"code":"var _jsxFileName = \"D:\\\\Tom\\xE1\\u0161\\\\Documents\\\\_GIT\\\\sti-2021-novotny\\\\client\\\\src\\\\Chat.js\";\nimport React, { Component } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ChatPage extends Component {\n  constructor() {\n    super(...arguments);\n\n    this.submitHandler = event => {\n      event.preventDefault();\n      const email = this.emailElement.current.value;\n      const password = this.passwordElement.current.value;\n      const requestBody = {\n        query: `\n                query {\n                    login(loginInput: {email: \"${email}\", password: \"${password}\"}) {\n                        userId\n                        email\n                        token\n                        tokenExpiration\n                        households\n                    }\n                }\n            `\n      };\n      fetch('http://localhost:5000/graphql', {\n        method: 'POST',\n        body: JSON.stringify(requestBody),\n        headers: {\n          'content-type': 'application/json'\n        }\n      }).then(res => {\n        // if (res.status !== 200 && res.status !== 201) {}                           \n        return res.json();\n      }).then(resData => {\n        if (resData.errors) {\n          throw new Error(resData.errors[0].message); // provizorní\n        }\n\n        return resData.data;\n      }).then(validData => {\n        this.context.login(validData.login.token, validData.login.userId, validData.login.email, validData.login.tokenExpiration, validData.login.households[0]);\n      }).catch(err => {\n        console.log(err.message);\n        toast.error(err.message);\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Form, {\n      className: \"col-md-3\",\n      onSubmit: props.onSubmit,\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        controlId: \"formEmail\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"email\",\n          placeholder: \"E-mail\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        controlId: \"formPassword\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Heslo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"password\",\n          placeholder: \"******\",\n          ref: props.password\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        children: \"P\\u0159ihl\\xE1sit se\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/register\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          type: \"button\",\n          children: \"Vytvo\\u0159it \\xFA\\u010Det\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 38\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default ChatPage;","map":{"version":3,"sources":["D:/Tomáš/Documents/_GIT/sti-2021-novotny/client/src/Chat.js"],"names":["React","Component","ChatPage","submitHandler","event","preventDefault","email","emailElement","current","value","password","passwordElement","requestBody","query","fetch","method","body","JSON","stringify","headers","then","res","json","resData","errors","Error","message","data","validData","context","login","token","userId","tokenExpiration","households","catch","err","console","log","toast","error","render","props","onSubmit"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nclass ChatPage extends Component {\r\n\r\n    /**\r\n     * Funkce přihlásí uživatele.\r\n     * \r\n     * @param {*} event \r\n     */\r\n    submitHandler = (event) => {\r\n        event.preventDefault();\r\n\r\n        const email = this.emailElement.current.value;\r\n        const password = this.passwordElement.current.value;\r\n\r\n        const requestBody = {\r\n            query: `\r\n                query {\r\n                    login(loginInput: {email: \"${email}\", password: \"${password}\"}) {\r\n                        userId\r\n                        email\r\n                        token\r\n                        tokenExpiration\r\n                        households\r\n                    }\r\n                }\r\n            `\r\n        };\r\n        fetch('http://localhost:5000/graphql', {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n            }\r\n        })\r\n            .then(res => {   \r\n                // if (res.status !== 200 && res.status !== 201) {}                           \r\n                return res.json();\r\n            })\r\n            .then(resData => { \r\n                if(resData.errors){\r\n                    throw new Error(resData.errors[0].message); // provizorní\r\n                }\r\n                return resData.data;\r\n            })\r\n            .then(validData => { \r\n                this.context.login(validData.login.token, validData.login.userId, validData.login.email, validData.login.tokenExpiration, validData.login.households[0])\r\n            })\r\n            .catch(err => {\r\n                console.log(err.message);\r\n                toast.error(err.message);  \r\n            });\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Form className=\"col-md-3\" onSubmit={props.onSubmit}>\r\n                <Form.Group className=\"mb-3\" controlId=\"formEmail\">\r\n                    <Form.Label>text</Form.Label>\r\n                    <Form.Control type=\"email\" placeholder=\"E-mail\" />                    \r\n                </Form.Group>  \r\n                <Form.Group className=\"mb-3\" controlId=\"formPassword\">\r\n                    <Form.Label>Heslo</Form.Label>\r\n                    <Form.Control type=\"password\" placeholder=\"******\" ref={props.password} />\r\n                </Form.Group>  \r\n                <Button variant=\"primary\" type=\"submit\">Přihlásit se</Button>\r\n                <Link to=\"/register\"><Button variant=\"primary\" type=\"button\">Vytvořit účet</Button></Link>\r\n            </Form>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ChatPage;"]},"metadata":{},"sourceType":"module"}